{"ast":null,"code":"import _asyncToGenerator from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HandleCreatePost=function HandleCreatePost(_ref){var posts=_ref.posts,setPosts=_ref.setPosts;//console.log(posts);\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var token,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();token=localStorage.getItem(\"userToken\");_context.next=4;return fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts\",{method:'POST',headers:{'Content-Type':'Application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})}).then(function(response){return response.json();}).then(function(result){console.log([result.data.post]);var arr=posts.concat([result.data.post]);setPosts(arr);console.log(posts);}).catch(console.error);case 4:response=_context.sent;setTitle(\"\");setDescription(\"\");setPrice(\"\");setLocation(\"\");setWillDeliver(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create Post\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"createPostForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",className:\"newPost\",value:title,onChange:function onChange(event){setTitle(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"description\",className:\"newPost\",value:description,onChange:function onChange(event){setDescription(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"price\",className:\"newPost\",value:price,onChange:function onChange(event){setPrice(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"location\",className:\"newPost\",value:location,onChange:function onChange(event){setLocation(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"checkBox\",value:\"Deliver\",onClick:function onClick(){return setWillDeliver(true);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"willDeliver\",className:\"deliver\",children:\"Willing to Deliver?\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submitPost-Btn\",children:\"Submit\"})]})]});};export default HandleCreatePost;","map":{"version":3,"sources":["/home/mayankawasthi/Strangers.Things/src/helpers/HandleCreatePost.js"],"names":["React","useState","HandleCreatePost","posts","setPosts","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","handleSubmit","event","preventDefault","token","localStorage","getItem","fetch","method","headers","body","JSON","stringify","post","then","response","json","result","console","log","data","arr","concat","catch","error","target","value"],"mappings":"iXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,C,6IAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAyB,IAAtBC,CAAAA,KAAsB,MAAtBA,KAAsB,CAAfC,QAAe,MAAfA,QAAe,CAC9C;AAEA,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAAsCL,QAAQ,CAAC,EAAD,CAA9C,yCAAOM,WAAP,eAAoBC,cAApB,eACA,eAA0BP,QAAQ,CAAC,EAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAsCX,QAAQ,CAAC,KAAD,CAA9C,0CAAOY,WAAP,gBAAoBC,cAApB,gBAEA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,KAAP,qIACjBA,KAAK,CAACC,cAAN,GACMC,KAFW,CAEHC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAFG,uBAIMC,CAAAA,KAAK,CAAC,kEAAD,CAAqE,CAC7FC,MAAM,CAAE,MADqF,CAE7FC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BL,KAA3B,CAFK,CAFoF,CAM7FM,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAE,CACFtB,KAAK,CAAEA,KADL,CAEFE,WAAW,CAAEA,WAFX,CAGFE,KAAK,CAAEA,KAHL,CAIFE,QAAQ,CAAEA,QAJR,CAKFE,WAAW,CAAEA,WALX,CADW,CAAf,CANuF,CAArE,CAAL,CAgBpBe,IAhBoB,CAgBf,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAhBO,EAiBlBF,IAjBkB,CAiBb,SAAAG,MAAM,CAAI,CACZC,OAAO,CAACC,GAAR,CAAY,CAACF,MAAM,CAACG,IAAP,CAAYP,IAAb,CAAZ,EAEA,GAAMQ,CAAAA,GAAG,CAAGhC,KAAK,CAACiC,MAAN,CAAa,CAACL,MAAM,CAACG,IAAP,CAAYP,IAAb,CAAb,CAAZ,CAEAvB,QAAQ,CAAC+B,GAAD,CAAR,CAEAH,OAAO,CAACC,GAAR,CAAY9B,KAAZ,EAEH,CA1BkB,EA2BlBkC,KA3BkB,CA2BZL,OAAO,CAACM,KA3BI,CAJN,QAIXT,QAJW,eAiCjBvB,QAAQ,CAAC,EAAD,CAAR,CACAE,cAAc,CAAC,EAAD,CAAd,CACAE,QAAQ,CAAC,EAAD,CAAR,CACAE,WAAW,CAAC,EAAD,CAAX,CACAE,cAAc,CAAC,KAAD,CAAd,CArCiB,uDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAyCA,mBACI,wCACI,mCADJ,cAGI,cAAM,EAAE,CAAC,gBAAT,CAA0B,QAAQ,CAAEA,YAApC,wBAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,SAAS,CAAC,SAAjD,CAA2D,KAAK,CAAEV,KAAlE,CACI,QAAQ,CAAE,kBAACW,KAAD,CAAW,CAAEV,QAAQ,CAACU,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAR,CAA8B,CADzD,EAFJ,cAKI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,aAA/B,CAA6C,SAAS,CAAC,SAAvD,CAAiE,KAAK,CAAEjC,WAAxE,CACI,QAAQ,CAAE,kBAACS,KAAD,CAAW,CAAER,cAAc,CAACQ,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAd,CAAoC,CAD/D,EALJ,cAQI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,SAAS,CAAC,SAAjD,CAA2D,KAAK,CAAE/B,KAAlE,CACI,QAAQ,CAAE,kBAACO,KAAD,CAAW,CAAEN,QAAQ,CAACM,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAR,CAA8B,CADzD,EARJ,cAWI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,UAA/B,CAA0C,SAAS,CAAC,SAApD,CAA8D,KAAK,CAAE7B,QAArE,CACI,QAAQ,CAAE,kBAACK,KAAD,CAAW,CAAEJ,WAAW,CAACI,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAX,CAAiC,CAD5D,EAXJ,cAcI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,UAAjC,CAA4C,KAAK,CAAC,SAAlD,CACI,OAAO,CAAE,yBAAM1B,CAAAA,cAAc,CAAC,IAAD,CAApB,EADb,EAdJ,cAiBI,cAAO,OAAO,CAAC,aAAf,CAA6B,SAAS,CAAC,SAAvC,iCAjBJ,kBAiBiF,aAjBjF,cAiB0F,aAjB1F,cAmBI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,gBAAhC,oBAnBJ,GAHJ,GADJ,CA4BH,CA9ED,CAgFA,cAAeZ,CAAAA,gBAAf","sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst HandleCreatePost = ({ posts, setPosts }) => {\r\n    //console.log(posts);\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [price, setPrice] = useState(\"\");\r\n    const [location, setLocation] = useState(\"\");\r\n    const [willDeliver, setWillDeliver] = useState(false);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        const token = localStorage.getItem(\"userToken\")\r\n\r\n        const response = await fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'Application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify({\r\n                post: {\r\n                    title: title,\r\n                    description: description,\r\n                    price: price,\r\n                    location: location,\r\n                    willDeliver: willDeliver,\r\n\r\n                }\r\n            })\r\n        }).then(response => response.json())\r\n            .then(result => {\r\n                console.log([result.data.post]);\r\n\r\n                const arr = posts.concat([result.data.post]);\r\n\r\n                setPosts(arr);\r\n\r\n                console.log(posts);\r\n\r\n            })\r\n            .catch(console.error);\r\n\r\n        setTitle(\"\");\r\n        setDescription(\"\");\r\n        setPrice(\"\");\r\n        setLocation(\"\");\r\n        setWillDeliver(false);\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>Create Post</h1>\r\n\r\n            <form id=\"createPostForm\" onSubmit={handleSubmit}>\r\n\r\n                <input type=\"text\" placeholder=\"title\" className=\"newPost\" value={title}\r\n                    onChange={(event) => { setTitle(event.target.value) }}></input>\r\n\r\n                <input type=\"text\" placeholder=\"description\" className=\"newPost\" value={description}\r\n                    onChange={(event) => { setDescription(event.target.value) }}></input>\r\n\r\n                <input type=\"text\" placeholder=\"price\" className=\"newPost\" value={price}\r\n                    onChange={(event) => { setPrice(event.target.value) }}></input>\r\n\r\n                <input type=\"text\" placeholder=\"location\" className=\"newPost\" value={location}\r\n                    onChange={(event) => { setLocation(event.target.value) }}></input>\r\n\r\n                <input type=\"checkbox\" className=\"checkBox\" value=\"Deliver\"\r\n                    onClick={() => setWillDeliver(true)}></input>\r\n\r\n                <label htmlFor=\"willDeliver\" className=\"deliver\">Willing to Deliver?</label> <br></br><br></br>\r\n\r\n                <button type=\"submit\" className=\"submitPost-Btn\">Submit</button>\r\n\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HandleCreatePost;"]},"metadata":{},"sourceType":"module"}