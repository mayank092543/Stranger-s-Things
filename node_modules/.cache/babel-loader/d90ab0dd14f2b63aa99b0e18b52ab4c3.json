{"ast":null,"code":"var _jsxFileName = \"/home/mayankawasthi/Strangers.Things/src/components/SendMessage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SendMessage = _ref => {\n  _s();\n\n  let {\n    posts,\n    setposts,\n    postId,\n    setPostId\n  } = _ref;\n  const [content, setContent] = useState(\"\"); //  export async function sendMessage () {\n  //     let messageInfo = \n  //                             { message : {     \n  //                                 content: `${content}`\n  //         }}\n  //       try{\n  //         const response = await fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postId}/messages`,\n  //         {\n  //           method: 'POST',\n  //           headers: {\n  //             'Content-Type': 'application/json',\n  //             'Authorization': `Bearer ${localStorage.getItem(\"userToken\")}`\n  //           },\n  //           body: JSON.stringify(\n  //             messageInfo\n  //             ),\n  //         }\n  //         );\n  //         const result = await response.json();\n  //         return results\n  //       } catch (error){\n  //         console.error('could not send message', error)\n  //       }\n  //     };\n\n  const handleMessageSubmit = async event => {\n    event.preventDefault();\n    let messageInfo = {\n      message: {\n        content: `${content}`\n      }\n    };\n    console.log(messageInfo);\n    console.log(localStorage.getItem(\"userToken\"));\n    console.log(postId);\n    const token = localStorage.getItem(\"userToken\"); // const response = fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postId}/messages`, {\n    //     method: 'POST',\n    //     headers: {\n    //         'Content-Type': 'Application/json',\n    //         'Authorization' : `Bearer ${token}`\n    //     },\n    //     body: JSON.stringify(\n    //         messageInfo\n    //     )\n    // }).then(response => response.json())\n    //   .then(result => {\n    //       console.log(result);\n    //     //   let allPosts = posts;\n    //     //   let updatedMessages = result;\n    //     //     for(let i = 0; i < allPosts.length; i++){\n    //     //         if (allPosts[i]._id === postId){\n    //     //             allPosts[i].messages = updatedMessages\n    //     //         }\n    //     //     }\n    //       setPosts(result);\n    //       setContent(\"\");\n    //       setPostId(null);\n    //   })\n    //   .catch(console.error);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleMessageSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      rows: \"4\",\n      cols: \"30\",\n      value: content,\n      placeholder: \"Message...\",\n      onChange: event => setContent(event.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"msg-Submit-Btn\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SendMessage, \"KPwtwb4lt1NZxOwnjhyyIoKb9lQ=\");\n\n_c = SendMessage;\nexport default SendMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendMessage\");","map":{"version":3,"sources":["/home/mayankawasthi/Strangers.Things/src/components/SendMessage.js"],"names":["React","useState","SendMessage","posts","setposts","postId","setPostId","content","setContent","handleMessageSubmit","event","preventDefault","messageInfo","message","console","log","localStorage","getItem","token","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;;AAEA,MAAMC,WAAW,GAAG,QAA0C;AAAA;;AAAA,MAAzC;AAACC,IAAAA,KAAD;AAAQC,IAAAA,QAAR;AAAkBC,IAAAA,MAAlB;AAA0BC,IAAAA;AAA1B,GAAyC;AAC1D,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,EAAD,CAAtC,CAD0D,CAG1D;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,QAAMQ,mBAAmB,GAAG,MAAMC,KAAN,IAAgB;AACxCA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAIC,WAAW,GACK;AAAEC,MAAAA,OAAO,EAAG;AACRN,QAAAA,OAAO,EAAG,GAAEA,OAAQ;AADZ;AAAZ,KADpB;AAKAO,IAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAZ;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AAGI,UAAMa,KAAK,GAAGF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd,CAZoC,CAcxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAKH,GA/CD;;AAiDA,sBACI;AAAM,IAAA,QAAQ,EAAER,mBAAhB;AAAA,4BACI;AAAU,MAAA,IAAI,EAAC,GAAf;AAAmB,MAAA,IAAI,EAAC,IAAxB;AAA6B,MAAA,KAAK,EAAEF,OAApC;AAA6C,MAAA,WAAW,EAAC,YAAzD;AACA,MAAA,QAAQ,EAAKG,KAAD,IAAWF,UAAU,CAACE,KAAK,CAACS,MAAN,CAAaC,KAAd;AADjC;AAAA;AAAA;AAAA;AAAA,YADJ,eAII;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,gBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAQH,CAvFD;;GAAMlB,W;;KAAAA,W;AA0FN,eAAeA,WAAf","sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst SendMessage = ({posts, setposts, postId, setPostId}) => {\r\n    const [content, setContent] = useState(\"\");\r\n\r\n    //  export async function sendMessage () {\r\n    //     let messageInfo = \r\n    //                             { message : {     \r\n    //                                 content: `${content}`\r\n    //         }}\r\n    \r\n    //       try{\r\n    //         const response = await fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postId}/messages`,\r\n    //         {\r\n    //           method: 'POST',\r\n    //           headers: {\r\n    //             'Content-Type': 'application/json',\r\n    //             'Authorization': `Bearer ${localStorage.getItem(\"userToken\")}`\r\n    //           },\r\n    //           body: JSON.stringify(\r\n    //             messageInfo\r\n    //             ),\r\n    //         }\r\n    //         );\r\n    //         const result = await response.json();\r\n    //         return results\r\n    //       } catch (error){\r\n    //         console.error('could not send message', error)\r\n    //       }\r\n    //     };\r\n        \r\n\r\n    const handleMessageSubmit = async(event) => {\r\n        event.preventDefault();\r\n        let messageInfo = \r\n                            { message : {     \r\n                                content: `${content}`\r\n        }}\r\n\r\n        console.log(messageInfo);\r\n        console.log(localStorage.getItem(\"userToken\"));\r\n        console.log(postId);\r\n\r\n            \r\n            const token = localStorage.getItem(\"userToken\")\r\n\r\n        // const response = fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postId}/messages`, {\r\n        //     method: 'POST',\r\n        //     headers: {\r\n        //         'Content-Type': 'Application/json',\r\n        //         'Authorization' : `Bearer ${token}`\r\n        //     },\r\n        //     body: JSON.stringify(\r\n        //         messageInfo\r\n        //     )\r\n        // }).then(response => response.json())\r\n        //   .then(result => {\r\n        //       console.log(result);\r\n              \r\n\r\n        //     //   let allPosts = posts;\r\n        //     //   let updatedMessages = result;\r\n\r\n        //     //     for(let i = 0; i < allPosts.length; i++){\r\n        //     //         if (allPosts[i]._id === postId){\r\n        //     //             allPosts[i].messages = updatedMessages\r\n        //     //         }\r\n        //     //     }\r\n            \r\n        //       setPosts(result);\r\n        //       setContent(\"\");\r\n        //       setPostId(null);\r\n          \r\n        //   })\r\n        //   .catch(console.error);\r\n\r\n\r\n\r\n\r\n    }\r\n    \r\n    return (\r\n        <form onSubmit={handleMessageSubmit}>\r\n            <textarea rows=\"4\" cols=\"30\" value={content} placeholder=\"Message...\"\r\n            onChange = {(event) => setContent(event.target.value)}></textarea>\r\n\r\n            <button type=\"submit\" className=\"msg-Submit-Btn\">Submit</button>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nexport default SendMessage;"]},"metadata":{},"sourceType":"module"}