{"ast":null,"code":"import _asyncToGenerator from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mayankawasthi/Strangers.Things/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AuthenticatedProfile=function AuthenticatedProfile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var token=localStorage.getItem(\"userToken\");useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/users/me\",{method:'GET',headers:{'Content-Type':'Application/json','Authorization':\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(result){console.log(result.data.posts);setPosts(result.data.posts);//    setPosts(result.data.posts);\n}).catch(console.error);case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{id:\"profile-Title\",children:\"Profile\"}),posts.map(function(post){return post.active?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"h4\",{children:post.description}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Price: \",post.price]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Seller: \",post.author.username]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Location: \",post.location]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),post.messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{id:\"message\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Message: \",message.content]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"From: \",message.fromUser.username]})]},message._id);})]},post._id):/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"p\",{children:\"There is no Post available yet\"})});})]});};export default AuthenticatedProfile;","map":{"version":3,"sources":["/home/mayankawasthi/Strangers.Things/src/components/AuthenticatedProfile.js"],"names":["React","useState","useEffect","AuthenticatedProfile","posts","setPosts","token","localStorage","getItem","fetchPosts","fetch","method","headers","then","response","json","result","console","log","data","catch","error","map","post","active","title","description","price","author","username","location","messages","message","content","fromUser","_id"],"mappings":"iXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,6IAEA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CAC/B,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd,CAEAN,SAAS,CAAC,UAAM,CACZ,GAAMO,CAAAA,UAAU,0FAAG,sKAEQC,CAAAA,KAAK,CAAC,qEAAD,CAAwE,CAChGC,MAAM,CAAE,KADwF,CAEhGC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BN,KAA3B,CAFK,CAFuF,CAAxE,CAAL,CAOpBO,IAPoB,CAOf,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAPO,EAQlBF,IARkB,CAQb,SAAAG,MAAM,CAAI,CACZC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,IAAP,CAAYf,KAAxB,EACAC,QAAQ,CAACW,MAAM,CAACG,IAAP,CAAYf,KAAb,CAAR,CACA;AACH,CAZkB,EAalBgB,KAbkB,CAaZH,OAAO,CAACI,KAbI,CAFR,QAETP,QAFS,qEAAH,kBAAVL,CAAAA,UAAU,0CAAhB,CAkBAA,UAAU,GAEb,CArBQ,CAqBN,EArBM,CAAT,CAuBA,mBACI,wCACI,WAAI,EAAE,CAAC,eAAP,qBADJ,CAIQL,KAAK,CAACkB,GAAN,CAAW,SAAAC,IAAI,QACXA,CAAAA,IAAI,CAACC,MAAL,cACI,oCACI,oBAAKD,IAAI,CAACE,KAAV,EADJ,cAEI,oBAAKF,IAAI,CAACG,WAAV,EAFJ,cAGI,gCAAYH,IAAI,CAACI,KAAjB,GAHJ,cAII,iCAAaJ,IAAI,CAACK,MAAL,CAAYC,QAAzB,GAJJ,cAKI,mCAAeN,IAAI,CAACO,QAApB,GALJ,kBAKuC,aALvC,CAOKP,IAAI,CAACQ,QAAL,CAAcT,GAAd,CAAkB,SAAAU,OAAO,qBACtB,aAAK,EAAE,CAAC,SAAR,wBACI,kCAAcA,OAAO,CAACC,OAAtB,GADJ,cAEI,+BAAWD,OAAO,CAACE,QAAR,CAAiBL,QAA5B,GAFJ,GAAuBG,OAAO,CAACG,GAA/B,CADsB,EAAzB,CAPL,GAAUZ,IAAI,CAACY,GAAf,CADJ,cAgBa,KAAC,KAAD,CAAO,QAAP,wBACL,qDADK,EAjBF,EAAf,CAJR,GADJ,CA8BH,CAzDD,CA2DA,cAAehC,CAAAA,oBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst AuthenticatedProfile = () => {\r\n    const [posts, setPosts] = useState([]);\r\n    const token = localStorage.getItem(\"userToken\");\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n\r\n            const response = await fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/users/me\", {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'Application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n\r\n            }).then(response => response.json())\r\n                .then(result => {\r\n                    console.log(result.data.posts);\r\n                    setPosts(result.data.posts);\r\n                    //    setPosts(result.data.posts);\r\n                })\r\n                .catch(console.error);\r\n\r\n        }\r\n        fetchPosts();\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <h1 id=\"profile-Title\">Profile</h1>\r\n            \r\n            {\r\n                posts.map((post =>\r\n                    post.active ?\r\n                        <div key={post._id}>\r\n                            <h2>{post.title}</h2>\r\n                            <h4>{post.description}</h4>\r\n                            <h3>Price: {post.price}</h3>\r\n                            <h3>Seller: {post.author.username}</h3>\r\n                            <h3>Location: {post.location}</h3> <br></br>\r\n\r\n                            {post.messages.map(message =>\r\n                                <div id=\"message\" key={message._id}>\r\n                                    <h2>Message: {message.content}</h2>\r\n                                    <h2>From: {message.fromUser.username}</h2>\r\n                                </div>)\r\n\r\n                            }\r\n\r\n                        </div> : <React.Fragment>\r\n                            <p>There is no Post available yet</p>\r\n                        </React.Fragment>\r\n                )\r\n              )\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AuthenticatedProfile;\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}