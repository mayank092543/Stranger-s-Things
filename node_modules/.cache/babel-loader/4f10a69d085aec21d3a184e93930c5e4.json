{"ast":null,"code":"var _jsxFileName = \"/home/mayankawasthi/Strangers.Things/src/components/AuthenticatedPosts.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport HandleCreatePost from '../helpers/HandleCreatePost';\nimport SendMessage from './SendMessage';\nimport Profile from './Profile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AuthenticatedPosts = () => {\n  _s();\n\n  const [posts, setPosts] = useState([]);\n  const [postId, setPostId] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState(\"\"); // console.log(searchTerm);\n\n  const token = localStorage.getItem(\"userToken\");\n\n  const handleDelete = async postIdToDelete => {\n    const response = await fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postIdToDelete}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'Application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(result => {\n      console.log(result);\n\n      if (result) {\n        const newPosts = posts.filter(post => post._id !== postIdToDelete);\n        setPosts(newPosts);\n      }\n    }).catch(console.error);\n  };\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const response = await fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts\", {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'Application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(response => response.json()).then(result => {\n        console.log(result.data.posts);\n        setPosts(result.data.posts); //    setPosts(result.data.posts);\n      }).catch(console.error);\n    };\n\n    fetchPosts();\n  }, []);\n\n  function postMatches(post, text) {\n    if (post.title.toLowerCase().includes(text.toLowerCase())) {\n      return true;\n    }\n  }\n\n  const filteredPosts = posts.filter(post => postMatches(post, searchTerm));\n  const postsToDisplay = searchTerm.length ? filteredPosts : posts;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"title-Addpost\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"post-title\",\n        children: \"Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search Post...\",\n        value: searchTerm,\n        className: \"search-Bar\",\n        onChange: event => setSearchTerm(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/posts/add\",\n        className: \"addlink\",\n        children: \"Add Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"main\",\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/add\",\n        children: /*#__PURE__*/_jsxDEV(HandleCreatePost, {\n          posts: posts,\n          setPosts: setPosts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), postsToDisplay.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: post.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Price: \", post.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Seller: \", post.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Location: \", post.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: post.isAuthor ? true : false,\n        className: \"sendMessage\",\n        onClick: () => setPostId(post._id),\n        children: \"Send Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: post.isAuthor ? false : true,\n        className: \"delete-btn\",\n        onClick: () => handleDelete(post._id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }, this), postId.length ? /*#__PURE__*/_jsxDEV(SendMessage, {\n        posts: posts,\n        setPosts: setPosts,\n        postId: postId,\n        setPostId: setPostId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 45\n      }, this) : \"\"]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }, this))]\n  }, void 0, true);\n};\n\n_s(AuthenticatedPosts, \"1yAXxyn4RPr6tVk7Bx1aI6uVq9A=\");\n\n_c = AuthenticatedPosts;\nexport default AuthenticatedPosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthenticatedPosts\");","map":{"version":3,"sources":["/home/mayankawasthi/Strangers.Things/src/components/AuthenticatedPosts.js"],"names":["React","useState","useEffect","BrowserRouter","Route","Link","HandleCreatePost","SendMessage","Profile","AuthenticatedPosts","posts","setPosts","postId","setPostId","searchTerm","setSearchTerm","token","localStorage","getItem","handleDelete","postIdToDelete","response","fetch","method","headers","then","json","result","console","log","newPosts","filter","post","_id","catch","error","fetchPosts","data","postMatches","text","title","toLowerCase","includes","filteredPosts","postsToDisplay","length","event","target","value","map","description","price","author","username","location","isAuthor"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\r\nimport HandleCreatePost from '../helpers/HandleCreatePost';\r\nimport SendMessage from './SendMessage';\r\nimport Profile from './Profile';\r\n\r\nconst AuthenticatedPosts = () => {\r\n    const [posts, setPosts] = useState([]);\r\n    const [postId, setPostId] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    // console.log(searchTerm);\r\n\r\n    const token = localStorage.getItem(\"userToken\")\r\n\r\n    const handleDelete = async (postIdToDelete) => {\r\n        const response = await fetch(`https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts/${postIdToDelete}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'Application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(response => response.json())\r\n            .then(result => {\r\n                console.log(result);\r\n\r\n                if (result) {\r\n                    const newPosts = posts.filter(post => post._id !== postIdToDelete);\r\n                    setPosts(newPosts)\r\n                }\r\n\r\n            })\r\n            .catch(console.error);\r\n\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n\r\n            const response = await fetch(\"https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT/posts\", {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'Application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n\r\n            }).then(response => response.json())\r\n                .then(result => {\r\n                    console.log(result.data.posts);\r\n                    setPosts(result.data.posts);\r\n                    //    setPosts(result.data.posts);\r\n                })\r\n                .catch(console.error);\r\n\r\n        }\r\n        fetchPosts();\r\n    }, [])\r\n\r\n    function postMatches(post, text) {\r\n        if (post.title.toLowerCase().includes(text.toLowerCase())) {\r\n            return true\r\n        }\r\n    }\r\n\r\n    const filteredPosts = posts.filter(post => postMatches(post, searchTerm));\r\n    const postsToDisplay = searchTerm.length ? filteredPosts : posts;\r\n\r\n    return (\r\n        <>\r\n\r\n            <div id=\"title-Addpost\">\r\n\r\n                <h1 id=\"post-title\">Posts</h1>\r\n\r\n                <input type=\"text\" placeholder=\"Search Post...\"\r\n                    value={searchTerm} className=\"search-Bar\"\r\n                    onChange={(event) => setSearchTerm(event.target.value)}></input>\r\n\r\n                <Link to=\"/posts/add\" className=\"addlink\">Add Post</Link>\r\n\r\n\r\n            </div>\r\n\r\n            <div id=\"main\">\r\n                <Route path=\"/posts/add\">\r\n                    <HandleCreatePost posts={posts} setPosts={setPosts} />\r\n                </Route>\r\n\r\n\r\n            </div>\r\n\r\n            {\r\n\r\n                postsToDisplay.map((post) => (\r\n\r\n                    <div key={post._id}>\r\n                        <h2>{post.title}</h2>\r\n                        <h4>{post.description}</h4>\r\n                        <h3>Price: {post.price}</h3>\r\n                        <h3>Seller: {post.author.username}</h3>\r\n                        <h3>Location: {post.location}</h3>\r\n\r\n                        <button disabled={post.isAuthor ? true : false}\r\n                         className=\"sendMessage\" onClick={() => setPostId(post._id)}>\r\n                         Send Message\r\n                        </button>\r\n\r\n                        <button disabled={post.isAuthor ? false : true}\r\n                         className=\"delete-btn\" onClick={() => handleDelete(post._id)}>\r\n                         Delete\r\n                        </button>\r\n\r\n                        {\r\n                            postId.length ? <SendMessage posts={posts} setPosts={setPosts} postId={postId} setPostId={setPostId} /> : \"\"\r\n                        }\r\n\r\n                    </div>)\r\n                )}\r\n        </>\r\n    )\r\n}\r\nexport default AuthenticatedPosts;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}